<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta name="description" content="Linux does not expose options such as SO_REUSEADDR and SO_REUSEPORT to userland. The knetstat module does.">
    <link href="css/theme.css" rel="stylesheet" type="text/css">
      <link href="css/rainbow-github.css" rel="stylesheet" type="text/css">
    <link
      rel="alternate" type="application/atom+xml"
      href="https://blog.separateconcerns.com/feed.atom"
    />
    <title>knetstat: checking socket options on Linux</title>
  </head>
  <body>
    <div id="container">
    <header>
      <h1>knetstat: checking socket options on Linux</h1>
      <h4>
        published 2017-06-11
        [ <a href="index.html">home</a> ]
      </h4>
    </header>
    

<p>A few weeks ago I was debugging network code, and I needed to check if some sockets were bound with <code>SO_REUSEADDR</code> and/or <code>SO_REUSEPORT</code>. I researched how I could inspect that, and was surprised to find out that the Linux kernel did not expose those options to userland.</p>

<p>Thankfully, there is <a href="https://github.com/veithen/knetstat">a kernel module called knetstat</a> which lets you do this very easily by adding new files into <code>procfs</code>. When I found it it only supported TCP, but I needed the information for UDP as well so I <a href="https://github.com/veithen/knetstat/pull/11">contributed the code</a> to support it.</p>

If you write networking code on Linux or just run servers, I encourage you to check it out. It is a nice little tool that can come very handy in some situations, including when you need to check options like <code>SO_{RCV,SND}BUF</code>.
    </div>
    <div id="footer">
      [ <a href="index.html">home</a> ]
    </div>
    <script src="js/rainbow.min.js"></script>
    <script
      data-goatcounter="https://separateconcerns.goatcounter.com/count"
      async src="//gc.zgo.at/count.js"></script>
  </body>
</html>
